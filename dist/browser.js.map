{
  "version": 3,
  "sources": ["../src/lib/functions.mjs", "../src/lib/Null.mjs", "../src/lib/Link.mjs", "../src/lib/fast-parse.mjs", "../src/browser.mjs"],
  "sourcesContent": ["\n// keep reference to original JSON.stringify, in case someone monkeypatches it\nconst jsonStringify = JSON.stringify\n\nexport const stringify = (value, replacer=null, space=\"\") => {\n\n\tconst objectReferences = new WeakMap()\n\n\tlet indent = \"\"\n\tlet gap = \"\"\n\n\tif (typeof space === \"number\") {\n\t\tindent += \" \".repeat(space)\n\t} else if (typeof space === \"string\") {\n\t\tindent = space\n\t}\n\n\tif (replacer && typeof replacer !== \"function\" && (\n        typeof replacer !== \"object\"\n        || typeof replacer.length !== \"number\"\n    )) {\n        throw new Error(\"JSONTag.stringify\");\n    }\n\n\tconst encodeProperties = (obj) => {\n\t\tlet mind = gap\n\t\tgap += indent\n\t\tlet gapstart = \"\"\n\t\tlet gapend = \"\"\n\t\tlet keys = Object.keys(obj)\n\t\tif (Array.isArray(replacer)) {\n\t\t\tkeys = keys.filter(key => replacer.indexOf(key)!==-1)\n\t\t} \n\t\tif (gap) {\n\t\t\tgapstart =\"\\n\"+gap\n\t\t\tgapend = \"\\n\"+mind\n\t\t}\n\t\tlet result = gapstart+keys.map(prop => {\n\t\t\treturn jsonStringify(prop)+':'+str(prop, obj)\n\t\t}).join(\",\"+gapstart)+gapend\n\t\tgap = mind\n\t\treturn result\n\t}\n\n\tconst encodeEntries = (arr) => {\n\t\tlet mind = gap\n\t\tgap += indent\n\t\tlet gapstart = \"\"\n\t\tlet gapend = \"\"\n\t\tif (gap) {\n\t\t\tgapstart = \"\\n\"+gap\n\t\t\tgapend = \"\\n\"+mind\n\t\t}\n\t\tlet result = gapstart+arr.map((value,index) => {\n\t\t\treturn str(index, arr)\n\t\t}).join(\",\"+gapstart)+gapend\n\t\tgap = mind\n\t\treturn result\n\t}\n\n\t/**\n\t * Walks over all objects in value to set ids if needed\n\t */\n\tconst checkCircular = new WeakMap()\n\tfunction createIds(value) {\n\t\tif (Array.isArray(value)) {\n\t\t\tfor (let v of value) {\n\t\t\t\tcreateIds(v)\n\t\t\t}\n\t\t} else if (value && getType(value)=='object') {\n\t\t\tif (checkCircular.has(value)) {\n\t\t\t\tlet id = getAttribute(value, 'id')\n\t\t\t\tif (!id) {\n\t\t\t\t\tcreateId(value)\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tcheckCircular.set(value, true)\n\t\t\t\tfor (let v of Object.values(value)) {\n\t\t\t\t\tcreateIds(v)\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tconst str = (key, holder) => {\n\t\tlet value = holder[key]\n\t\tif (typeof replacer === 'function' && key!=='') {\n\t\t\tvalue = replacer.call(holder, key, value)\n\t\t}\n\t\tif (getType(value) === 'object' && objectReferences.has(value)) {\n\t\t\tlet id = getAttribute(value, 'id')\n\t\t\tif (!id) {\n\t\t\t\t// FIXME: this is too late, value may already have been stringified, without id earlier\n\t\t\t\tid = createId(value)\n\t\t\t}\n\t\t\treturn '<link>\"'+id+'\"'\n\t\t}\n\t\tif (typeof value === 'undefined' || value === null) {\n\t\t\treturn 'null'\n\t\t}\n\t\tif (getType(value) === 'object') {\n\t\t\tobjectReferences.set(value, true)\n\t\t}\n\t\tif (typeof value.toJSONTag == 'function') {\n\t\t\treturn value.toJSONTag(objectReferences, replacer, space)\n\t\t} else if (Array.isArray(value)) {\n\t\t\treturn getTypeString(value) + \"[\"+encodeEntries(value)+\"]\"\n\t\t} else if (value instanceof Object) {\n\t\t\tswitch (getType(value)) {\n\t\t\t\tcase 'string':\n\t\t\t\tcase 'decimal':\n\t\t\t\tcase 'money':\n\t\t\t\tcase 'link':\n\t\t\t\tcase 'text':\n\t\t\t\tcase 'blob':\n\t\t\t\tcase 'color':\n\t\t\t\tcase 'email':\n\t\t\t\tcase 'hash':\n\t\t\t\tcase 'duration':\n\t\t\t\tcase 'phone':\n\t\t\t\tcase 'url':\n\t\t\t\tcase 'uuid':\n\t\t\t\tcase 'date':\n\t\t\t\tcase 'time':\n\t\t\t\tcase 'datetime':\n\t\t\t\t\treturn getTypeString(value) + jsonStringify(''+value, replacer, space)\n\t\t\t\tbreak\n\t\t\t\tcase 'int':\n\t\t\t\tcase 'uint':\n\t\t\t\tcase 'int8':\n\t\t\t\tcase 'uint8':\n\t\t\t\tcase 'int16':\n\t\t\t\tcase 'uint16':\n\t\t\t\tcase 'int32':\n\t\t\t\tcase 'uint32':\n\t\t\t\tcase 'int64':\n\t\t\t\tcase 'uint64':\n\t\t\t\tcase 'float':\n\t\t\t\tcase 'float32':\n\t\t\t\tcase 'float64':\n\t\t\t\tcase 'timestamp':\n\t\t\t\tcase 'number':\n\t\t\t\tcase 'boolean':\n\t\t\t\t\treturn getTypeString(value) + jsonStringify(value, replacer, space)\n\t\t\t\tbreak\n\t\t\t\tcase 'array': \n\t\t\t\t\tlet entries = encodeEntries(value) // calculate children first so parent references can add id attribute\n\t\t\t\t\treturn getTypeString(value) + '[' + entries + '}'\n\t\t\t\tbreak\n\t\t\t\tcase 'object': \n\t\t\t\t\tif (value === null) {\n\t\t\t\t\t\treturn \"null\"\n\t\t\t\t\t}\n\t\t\t\t\tlet props = encodeProperties(value); // calculate children first so parent references can add id attribute\n\t\t\t\t\treturn getTypeString(value) + '{' + props + '}'\n\t\t\t\tbreak\n\t\t\t\tdefault:\n\t\t\t\t\tthrow new Error(getType(value)+' type not yet implemented')\n\t\t\t\tbreak\n\t\t\t}\n\t\t} else {\n\t\t\treturn jsonStringify(value, replacer, space)\n\t\t}\n\t}\n\n\t// first check if there are circular references\n\t// if so, make sure that the referenced objects have an id attribute\n\tcreateIds(value)\n\tconst result = str(\"\", {\"\": value})\n\treturn result\n}\n\nfunction createId(value) {\n\tif (typeof crypto.randomUUID === 'function') {\n\t\tvar id = crypto.randomUUID()\n\t} else {\n\t\t// Fallback for when crypto.randomUUID is not available\n\t\tlet replacer = c => (c ^ crypto.getRandomValues(new Uint8Array(1))[0] & 15 >> c / 4)\n\n\t\tif (typeof crypto === 'undefined') {\n\t\t\t// Fallback even further for when crypto API is not available\n\t\t\treplacer = c => (c ^ Math.random() * 256 & 15 >> c / 4)\n\t\t}\n\n\t\tvar id = ([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g, c => replacer(c).toString(16));\n\t}\n\tsetAttribute(value, 'id', id)\n\treturn id\n}\n\n\nexport const isNull = (v) => {\n\tlet result = (v === null) || (typeof v.isNull !== 'undefined' && v.isNull)\n\treturn result\n}\n\nif (!globalThis.JSONTagTypeInfo) {\n\tglobalThis.JSONTagTypeInfo = new WeakMap()\n}\nconst typeInfo = globalThis.JSONTagTypeInfo\n\nexport const getType = (obj) => {\n\tif (typeInfo.has(obj)) {\n\t\tlet info = typeInfo.get(obj)\n\t\tif (info.type) {\n\t\t\treturn info.type\n\t\t}\n\t}\n\tif (Array.isArray(obj)) {\n\t\treturn 'array'\n\t}\n\tif (obj instanceof Number) {\n\t\treturn 'number'\n\t}\n\tif (obj instanceof Boolean) {\n\t\treturn 'boolean'\n\t}\n\treturn typeof obj\n}\n\nexport const types = [\n\t'object','array','string','number','boolean',\t\t\t\t// JSON\n\t'decimal','money','uuid','url','link','date','time','datetime', 'duration', 'timestamp',\n\t'text', 'blob', 'color', 'email', 'hash', 'phone',\n\t'int', 'int8', 'int16', 'int32', 'int64',\n\t'uint', 'uint8', 'uint16', 'uint32', 'uint64',\n\t'float', 'float32', 'float64'\n]\n\nexport const setType = (obj, type) => {\n\tif (typeof obj !== 'object') {\n\t\tthrow new TypeError('JSONTag can only add attributes to objects, convert literals to objects first')\n\t}\n\tlet info = {}\n\tif (typeInfo.has(obj)) {\n\t\tinfo = typeInfo.get(obj)\n\t}\n\tif (!types.includes(type)) {\n\t\tthrow new TypeError('unknown type '+type)\n\t}\n\tinfo.type = type\n\tif (typeof info.attributes === 'undefined') {\n\t\tinfo.attributes = {}\n\t}\n\ttypeInfo.set(obj, info)\n}\n\nexport const setAttribute = (obj, attr, value) => {\n\tif (typeof obj !== 'object') {\n\t\tthrow new TypeError('JSONTag can only add attributes to objects, convert literals to objects first')\n\t}\n\tif (Array.isArray(value)) {\n\t\tvalue = value.join(' ')\n\t}\n\tif (typeof value !== 'string') {\n\t\tthrow new TypeError('attribute values must be a string or an array of strings')\n\t}\n\tif (value.indexOf('\"')!==-1) {\n\t\tthrow new TypeError('attribute values must not contain \" character')\n\t}\n\tif (value.indexOf(' ')!==-1) {\n\t\tvalue = value.split(\" \")\n\t}\n\tlet info = typeInfo.get(obj) || { attributes: {}}\n\tinfo.attributes[attr] = value\n\ttypeInfo.set(obj, info)\n}\n\nexport const setAttributes = (obj, attributes) => {\n\tif (typeof obj !== 'object') {\n\t\tthrow new TypeError('JSONTag can only add attributes to objects, convert literals to objects first')\n\t}\n\tif (typeof attributes !== 'object') {\n\t\tthrow new TypeError('attributes param must be an object')\n\t}\n\tObject.keys(attributes).forEach(key => {\n\t\tsetAttribute(obj, key, attributes[key])\n\t})\n}\n\nexport const getAttribute = (obj, attr) => {\n\tlet info = typeInfo.get(obj) || { attributes: {}}\n\treturn info.attributes[attr]\n}\n\nexport const addAttribute = (obj, attr, value) => {\n\tif (typeof value !== 'string') {\n\t\tthrow new TypeError('attribute values must be a string')\n\t}\n\tif (value.indexOf('\"')!==-1) {\n\t\tthrow new TypeError('attribute values must not contain \" characters')\n\t}\t\n\tlet info = typeInfo.get(obj) || { attributes: {}}\n\tif (typeof info.attributes[attr] === 'undefined') {\n\t\tsetAttribute(obj, attr, value)\n\t} else {\n\t\tif (!Array.isArray(info.attributes[attr])) {\n\t\t\tinfo.attributes[attr] = [ info.attributes[attr] ]\n\t\t}\n\t\tif (value.indexOf(' ')!==-1) {\n\t\t\tvalue = value.split(\" \")\n\t\t} else {\n\t\t\tvalue = [ value ]\n\t\t}\n\t\tinfo.attributes[attr] = info.attributes[attr].concat(value)\n\t\ttypeInfo.set(obj, info)\n\t}\n}\n\nexport const removeAttribute = (obj, attr) => {\n\tlet info = typeInfo.get(obj) || { attributes: {}}\n\tif ( typeof info.attributes[attr] !== 'undefined') {\n\t\tdelete info.attributes[attr]\n\t\ttypeInfo.set(obj, info)\n\t}\n}\n\nexport const getAttributes = (obj) => {\n\tlet info = typeInfo.get(obj) || { attributes: {}}\n\treturn Object.assign({},info.attributes)\n}\n\nexport const getAttributesString = (obj) => {\n\treturn Object.entries(getAttributes(obj))\n\t\t.map(([attr, attrValue]) => {\n\t\t\tif (Array.isArray(attrValue)) {\n\t\t\t\tattrValue = attrValue.join(' ')\n\t\t\t}\t\n\t\t\treturn attr+'=\"'+attrValue+'\"'\n\t\t})\n\t\t.join(' ')\n}\n\nexport const getTypeString = (obj) => {\n\tlet type = getType(obj)\n\tlet attributes = getAttributes(obj)\n\tlet attributesString = Object.entries(attributes)\n\t\t.map(([attr, attrValue]) => {\n\t\t\tif (Array.isArray(attrValue)) {\n\t\t\t\tattrValue = attrValue.join(' ')\n\t\t\t}\t\n\t\t\treturn attr+'=\"'+attrValue+'\"'\n\t\t})\n\t\t.join(' ')\n\tif (!attributesString) {\n\t\tif (['object','array','string','number','boolean'].indexOf(type)!==-1) {\n\t\t\ttype = ''\n\t\t}\n\t}\n\tif (type || attributesString) {\n\t\treturn '<' + [type, attributesString].filter(Boolean).join(' ') + '>'\n\t} else {\n\t\treturn '';\n\t}\n}\n\nfunction shallowClone(o) {\n\tif (o instanceof Number) {\n\t\treturn new Number(o)\n\t}\n\tif (o instanceof Boolean) {\n\t\treturn new Boolean(o)\n\t}\n\tif (o instanceof String) {\n\t\treturn new String(o)\n\t}\n\tif (Array.isArray(o)) {\n\t\treturn [ ...o ]\n\t}\n\treturn { ...o }\n}\n\nexport const clone = (obj) => {\n\tlet typeString = getTypeString(obj)\n\tlet type = getType(obj)\n\tlet attributes = getAttributes(obj)\n\tlet clone = shallowClone(obj)\n\tif (typeString) {\n\t\tsetType(clone, type)\n\t\tif (attributes) {\n\t\t\tsetAttributes(clone, attributes)\n\t\t}\n\t}\n\treturn clone\n}", "import { getTypeString } from \"./functions.mjs\"\n\nclass ExtendableProxy {\n\tconstructor()\n\t{\n\t\treturn new Proxy(this,{\n\t\t\tget: (target,name) => {\n\t\t\t\tif (typeof target[name] !== 'undefined') {\n\t\t\t\t\treturn target[name]\n\t\t\t\t}\n\t\t\t\tif (name == 'then' || typeof name == 'symbol') {\n\t\t\t\t\treturn undefined\n\t\t\t\t}\n\t\t\t\tconsole.error('Attempting to get from Null', name, typeof name, JSON.stringify(name))\n\t\t\t\tthrow new Error('Attempting to get '+name+' from Null')\n\t\t\t},\n\t\t\tset: (target,name,newValue) => {\n\t\t\t\tconsole.error('Attempting to set '+name+' in Null to',newValue)\n\t\t\t\tthrow new Error('Attempting to set '+name+' in Null')\t\n\t\t\t}\n\t\t})\n\t}\n\n}\n\nexport default class Null extends ExtendableProxy {\n\n\tisNull = true;\n\n\ttoString()\n\t{\n\t\treturn ''\n\t}\n\n\ttoJSON()\n\t{\n\t\treturn 'null'\n\t}\n\n\ttoJSONTag()\n\t{\n\t\tlet type = getTypeString(this)\n\t\treturn type+this.toJSON()\n\t}\n\n}", "import { getAttributesString, setType } from \"./functions.mjs\"\n\nexport default class Link {\n\t#url;\n\n\tconstructor(url)\n\t{\n\t\tif (typeof url !== 'string') {\n\t\t\tthrow new Error('not a url:',url)\n\t\t}\n\t\tthis.#url = ''+url\n\t\tsetType(this, 'link')\n\t}\n\n\tstatic from(url)\n\t{\n\t\tif (url instanceof Link) {\n\t\t\treturn url\n\t\t}\n\t\tif (typeof url !== 'string') {\n\t\t\tthrow new Error('not a url:',url)\n\t\t}\n\t\treturn new Link(url)\n\t}\n\n\tget value()\n\t{\n\t\treturn this.#url\n\t}\n\n\ttoString()\n\t{\n\t\treturn this.#url\n\t}\n\n\ttoJSON()\n\t{\n\t\treturn '\"'+this.#url+'\"'\n\t}\n\n\ttoJSONTag()\n\t{\n\t\tlet attributes = getAttributesString(this)\n\t\treturn '<link'+(attributes ? ' ' + attributes : '')+'>'+this.toJSON()\n\t}\n\n}", "// non streaming handbuilt jsontag parser\nimport * as JSONTag from './functions.mjs'\nimport Null from './Null.mjs'\n\nexport default function parse(input, reviver, meta)\n{\n    if (!meta) {\n        meta = {}\n    }\n    if (!meta.index) {\n        meta.index = {}\n    }\n    if (!meta.index.id) {\n        meta.index.id = new Map()\n    }\n    if (!meta.unresolved) {\n        meta.unresolved = new Map()\n    }\n    if (!meta.baseURL) {\n        meta.baseURL = 'http://localhost/'\n    }\n\n    let at, ch, value, result;\n    let escapee = {\n        '\"': '\"',\n        \"\\\\\":\"\\\\\",\n        '/': '/',\n        b: \"\\b\",\n        f: \"\\f\",\n        n: \"\\n\",\n        r: \"\\r\",\n        t: \"\\t\"\n    }\n\n    let error = function(m)\n    {\n        let context = input.substring(at-100,at+100)\n        throw {\n            name: 'SyntaxError',\n            message: m,\n            at: at,\n            input: context\n        }\n    }\n\n    let next = function(c)\n    {\n        if (c && c!==ch) {\n            error(\"Expected '\"+c+\"' instead of '\"+ch+\"'\")\n        }\n        ch = input.charAt(at)\n        at+=1\n        return ch\n    }\n    \n    let number = function(tagName)\n    {\n        let numString = ''\n        if (ch==='-') {\n            numString = '-'\n            next('-')\n        }\n        while(ch>='0' && ch<='9') {\n            numString += ch\n            next()\n        }\n        if (ch==='.') {\n            numString+='.'\n            while(next() && ch >= '0' && ch <= '9') {\n                numString += ch\n            }\n        }\n        if (ch === 'e' || ch === 'E') {\n            numString += ch\n            next()\n            if (ch === '-' || ch === '+') {\n                numString += ch\n                next()\n            }\n            while (ch >= '0' && ch <= '9') {\n                numString += ch\n                next()\n            }\n        }\n        let result = new Number(numString).valueOf()\n        if (tagName) {\n            switch(tagName) {\n                case \"int\":\n                    isInt(numString)\n                    break\n                case \"uint\":\n                    isInt(numString, [0,Infinity])\n                    break\n                case \"int8\":\n                    isInt(numString, [-128,127])\n                    break\n                case \"uint8\":\n                    isInt(numString, [0,255])\n                    break\n                case \"int16\":\n                    isInt(numString, [-32768,32767])\n                    break\n                case \"uint16\":\n                    isInt(numString, [0,65535])\n                    break\n                case \"int32\":\n                    isInt(numString, [-2147483648, 2147483647])\n                    break\n                case \"uint32\":\n                    isInt(numString, [0,4294967295])\n                    break\n                case \"timestamp\":\n                case \"int64\":\n                    isInt(numString, [-9223372036854775808,9223372036854775807])\n                    break\n                case \"uint64\":\n                    isInt(numString, [0,18446744073709551615])\n                    break\n                case \"float\":\n                    isFloat(numString)\n                    break\n                case \"float32\":\n                    isFloat(numString, [-3.4e+38,3.4e+38])\n                    break\n                case \"float64\":\n                    isFloat(numString, [-1.7e+308,+1.7e+308])\n                    break\n                case \"number\":\n                    //FIXME: what to check? should already be covered by JSON parsing rules?\n                    break\n                default:\n                    isTypeError(tagName, numString)\n                    break\n            }\n        }\n        return result\n    }\n\n    let isTypeError = function(type, value)\n    {\n        error('Syntax error, expected '+type+', got: '+value)\n    }\n\n    const regexes = {\n        color: /^(rgb|hsl)a?\\((\\d+%?(deg|rad|grad|turn)?[,\\s]+){2,3}[\\s\\/]*[\\d\\.]+%?\\)$/i,\n        email: /^[A-Za-z0-9_!#$%&'*+\\/=?`{|}~^.-]+@[A-Za-z0-9.-]+$/,\n        uuid:  /^[0-9a-fA-F]{8}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{12}$/,\n        decimal: /^\\d*\\.?\\d*$/,\n        money: /^[A-Z]+\\$\\d*\\.?\\d*$/,\n        duration: /^(-?)P(?=\\d|T\\d)(?:(\\d+)Y)?(?:(\\d+)M)?(?:(\\d+)([DW]))?(?:T(?:(\\d+)H)?(?:(\\d+)M)?(?:(\\d+(?:\\.\\d+)?)S)?)?$/,\n        phone: /^[+]?(?:\\(\\d+(?:\\.\\d+)?\\)|\\d+(?:\\.\\d+)?)(?:[ -]?(?:\\(\\d+(?:\\.\\d+)?\\)|\\d+(?:\\.\\d+)?))*(?:[ ]?(?:x|ext)\\.?[ ]?\\d{1,5})?$/,\n        time: /^(\\d{2}):(\\d{2})(?::(\\d{2}(?:\\.\\d+)?))?$/,\n        date: /^-?[1-9][0-9]{3,}-([0][1-9]|[1][0-2])-([1-2][0-9]|[0][1-9]|[3][0-1])$/,\n        datetime: /^(\\d{4,})-(\\d{2})-(\\d{2})[T ](\\d{2}):(\\d{2})(?::(\\d{2}(?:\\.\\d+)?))?Z?$/,\n        range: /^\\[-?(\\d+\\.)?\\d+\\,-?(\\d+\\.)?\\d+\\]$/\n    }\n\n    let isFloat = function(float, range)\n    {\n        let test = new Number(parseFloat(float))\n        let str = test.toString()\n        if (float!==str) {\n            error('Syntax Error: expected float value')\n        }\n        if (range) {\n            if (typeof range[0] === 'number') {\n                if (test<range[0]) {\n                    error('Syntax Error: float value out of range')\n                }\n            }\n            if (typeof range[1] === 'number') {\n                if (test>range[1]) {\n                    error('Syntax Error: float value out of range')    \n                }\n            }\n        }\n    }\n    \n    let isInt = function(int, range)\n    {\n        let test = new Number(parseInt(int))\n        let str = test.toString()\n        if (int!==str) {\n            error('Syntax Error: expected integer value')\n        }\n        if (range) {\n            if (typeof range[0] === 'number') {\n                if (test<range[0]) {\n                    error('Syntax Error: integer value out of range')\n                }\n            }\n            if (typeof range[1] === 'number') {\n                if (test>range[1]) {\n                    error('Syntax Error: integer value out of range')    \n                }\n            }\n        }\n    }\n\n    let isColor = function(color)\n    {\n        let result = false\n        if (color.charAt(0) === \"#\") {\n            color = color.substring(1)\n            result = ([3, 4, 6, 8].indexOf(color.length) > -1) && !isNaN(parseInt(color, 16))\n            if (result.toString(16)!==color) {\n                isTypeError('color', color)\n            }\n        } else {\n            result = regexes.color.test(color)\n        }\n        if (!result) {\n            isTypeError('color',color)\n        }\n        return true\n    }\n\n    let isEmail = function(email)\n    {\n        let result = regexes.email.test(email)\n        if (!result) {\n            isTypeError('email',email)\n        }\n        return true\n    }\n\n    let isUuid = function(uuid)\n    {\n        let result = regexes.uuid.test(uuid)\n        if (!result) {\n            isTypeError('uuid',uuid)\n        }\n        return true\n    }\n\n    let isDecimal = function(decimal)\n    {\n        let result = regexes.decimal.test(decimal)\n        if (!result) {\n            isTypeError('decimal',decimal)\n        }\n        return true\n    }\n\n    let isMoney = function(money)\n    {\n        let result = regexes.money.test(money)\n        if (!result) {\n            isTypeError('money',money)\n        }\n        return true\n    }\n    \n    let isUrl = function(url)\n    {\n        try {\n            return Boolean(new URL(url, meta.baseURL))\n        } catch(e) {\n            console.log(e)\n            isTypeError('url',url)\n        }\n    }\n    \n    let isDuration = function(duration)\n    {\n        let result = regexes.duration.test(duration)\n        if (!result) {\n            isTypeError('duration',duration)\n        }\n        return true\n    }\n    \n    let isPhone = function(phone)\n    {\n        let result = regexes.phone.test(phone)\n        if (!result) {\n            isTypeError('phone',phone)\n        }\n        return true\n    }\n    \n    let isRange = function(range)\n    {\n        let result = regexes.range.test(range)\n        if (!result) {\n            isTypeError('range',range)\n        }\n        return true\n    }\n    \n    let isTime = function(time)\n    {\n        let result = regexes.time.test(time)\n        if (!result) {\n            isTypeError('time',time)\n        }\n        return true\n    }\n    \n    let isDate = function(date)\n    {\n        let result = regexes.date.test(date)\n        if (!result) {\n            isTypeError('date',date)\n        }\n        return true\n    }\n    \n    let isDatetime = function(datetime)\n    {\n        let result = regexes.datetime.test(datetime)\n        if (!result) {\n            isTypeError('datetime',datetime)\n        }\n        return true\n    }\n\n    let checkStringType = function(tagName, value)\n    {\n        if (!tagName) {\n            return\n        }\n        switch(tagName){\n            case \"object\":\n            case \"array\":\n            case \"int8\":\n            case \"uint8\":\n            case \"int16\":\n            case \"uint16\":\n            case \"int32\":\n            case \"uint32\":\n            case \"int64\":\n            case \"uint64\":\n            case \"int\":\n            case \"uint\":\n            case \"float32\":\n            case \"float64\":\n            case \"float\":\n            case \"timestamp\":\n                isTypeError(tagName, value)\n                break\n            case \"uuid\":\n                return isUuid(value)\n            case \"decimal\":\n                return isDecimal(value)\n            case \"money\":\n                return isMoney(value)\n            case \"url\":\n                return isUrl(value)\n            case \"link\":\n            case \"string\":\n            case \"text\":\n            case \"blob\":\n            case \"hash\":\n                //anything goes\n                return true\n            case \"color\":\n                return isColor(value)\n            case \"email\":\n                return isEmail(value)\n            case \"duration\":\n                return isDuration(value)\n            case \"phone\":\n                return isPhone(value)\n            case \"range\":\n                return isRange(value)\n            case \"time\":\n                return isTime(value)\n            case \"date\":\n                return isDate(value)\n            case \"datetime\":\n                return isDatetime(value)\n        }\n        error('Syntax error: unknown tagName '+tagName)\n    }    \n\n    let string = function(tagName)\n    {\n        let value = \"\", hex, i, uffff;\n        if (ch !== '\"') {\n            error(\"Syntax Error\")\n        }\n        next('\"')\n        while(ch) {\n            if (ch==='\"') {\n                next()\n                checkStringType(tagName, value)\n                return value\n            }\n            if (ch==='\\\\') {\n                next()\n                if (ch==='u') {\n                    uffff=0\n                    for (i=0; i<4; i++) {\n                        hex = parseInt(next(), 16)\n                        if (!isFinite(hex)) {\n                            break\n                        }\n                        uffff = uffff * 16 + hex\n                    }\n                    value += String.fromCharCode(uffff)\n                    next()\n                } else if (typeof escapee[ch] === 'string') {\n                    value += escapee[ch]\n                    next()\n                } else {\n                    break\n                }\n            } else {\n                value += ch\n                next()\n            }\n        }\n        error(\"Syntax error: incomplete string\")\n    }\n\n    let tag = function()\n    {\n        let key, val, tagOb={\n            attributes: {}\n        }\n        if (ch !== '<') {\n            error(\"Syntax Error\")\n        }\n        next('<')\n        key = word()\n        if (!key) {\n            error('Syntax Error: expected tag name')\n        }\n        tagOb.tagName = key\n        whitespace()\n        while(ch) {\n            if (ch==='>') {\n                next('>')\n                return tagOb\n            }\n            key = word()\n            if (!key) {\n                error('Syntax Error: expected attribute name')\n            }\n            whitespace()\n            next('=')\n            whitespace()\n            val = string()\n            tagOb.attributes[key] = val\n            whitespace()\n        }\n        error('Syntax Error: unexpected end of input')\n    }\n\n    let whitespace = function()\n    {\n        while (ch) {\n            switch(ch) {\n                case ' ':\n                case \"\\t\":\n                case \"\\r\":\n                case \"\\n\":\n                    next()\n                break\n                default:\n                    return\n                break\n            }\n        }\n    }\n\n    let word = function()\n    {\n        //[a-z][a-z0-9_]*\n        let val='';\n        if ((ch>='a' && ch<='z') || (ch>='A' && ch<='Z')) {\n            val += ch\n            next()\n        } else {\n            error('Syntax Error: expected word')\n        }\n        while((ch>='a' && ch<='z') || (ch>='A' && ch<='Z') || (ch>='0' && ch<='9') || ch=='_') {\n            val += ch\n            next()\n        }\n        return val\n    }\n\n    let boolOrNull = function(tagName)\n    {\n        let w = word()\n        if (!w || typeof w !== 'string') {\n            error('Syntax error: expected boolean or null, got \"'+w+'\"')\n        }\n        switch(w.toLowerCase()) {\n            case 'true':\n                if (tagName && tagName!=='boolean') {\n                    isTypeError(tagName,w)\n                }\n                return true\n            break\n            case 'false':\n                if (tagName && tagName!=='boolean') {\n                    isTypeError(tagName,w)\n                }\n                return false \n            break\n            case 'null':\n                return null\n            break\n            default:\n                error('Syntax error: expected boolean or null, got \"'+w+'\"')\n            break\n        }\n    }\n\n    let checkUnresolved = function(item, object, key)\n    {\n        if (JSONTag.getType(item)==='link') {\n            let link = ''+item\n            let links = meta.unresolved.get(link)\n            if (typeof links === 'undefined') {\n                meta.unresolved.set(link,[])\n                links = meta.unresolved.get(link)\n            }\n            let count = links.push({\n                src: new WeakRef(object),\n                key: key\n            })\n        }\n    }\n\n    let array = function()\n    {\n        let item, array = []\n        if (ch !== '[') {\n            error(\"Syntax error\")\n        }\n        next('[')\n        whitespace()\n        if (ch===']') {\n            next(']')\n            return array\n        }\n        while(ch) {\n            item = value()\n            checkUnresolved(item, array, array.length)\n            array.push(item)\n            whitespace()\n            if (ch===']') {\n                next(']')\n                return array\n            }\n            next(',')\n            whitespace()\n        }\n        error(\"Input stopped early\")\n    }\n\n    let object = function()\n    {\n        let key, val, object={}\n        if (ch !== '{') {\n            error(\"Syntax Error\")\n        }\n        next('{')\n        whitespace()\n        if (ch==='}') {\n            next('}')\n            return object\n        }\n        while(ch) {\n            key = string()\n            if (key==='__proto__') {\n                error(\"Attempt at prototype pollution\")\n            }\n            whitespace()\n            next(':')\n            val = value()\n            object[key] = val\n            checkUnresolved(val, object, key)\n            whitespace()\n            if (ch==='}') {\n                next('}')\n                return object\n            }\n            next(',')\n            whitespace()\n        }\n        error(\"Input stopped early\")\n    }\n\n    value = function()\n    {\n        let tagOb, result, tagName;\n        whitespace()\n        if (ch==='<') {\n            tagOb = tag()\n            tagName = tagOb.tagName\n            whitespace()\n        }\n        switch(ch) {\n            case '{':\n                if (tagName && tagName!=='object') {\n                    isTypeError(tagName, ch)\n                }\n                result = object()\n            break\n            case '[':\n                if (tagName && tagName!=='array') {\n                    isTypeError(tagName, ch)\n                }\n                result = array()\n            break\n            case '\"':\n                result = string(tagName)\n            break\n            case '-':\n                result = number(tagName)\n            break\n            default:\n                if (ch>='0' && ch<='9') {\n                    result = number(tagName)\n                } else {\n                    result = boolOrNull(tagName)\n                }\n            break\n        }\n        if (tagOb) {\n            if (result === null) {\n                result = new Null()\n            }\n            if (typeof result !== 'object') {\n                switch(typeof result) {\n                    case 'string':\n                        result = new String(result)\n                        break\n                    case 'number':\n                        result = new Number(result)\n                        break\n                    default:\n                        error('Syntax Error: unexpected type '+(typeof result))\n                        break\n                }\n            }\n            if (tagOb.tagName) {\n                JSONTag.setType(result, tagOb.tagName)\n            }\n            if (tagOb.attributes) {\n                JSONTag.setAttributes(result, tagOb.attributes)\n                if (tagOb.attributes?.id) {\n                    meta.index.id.set(tagOb.attributes.id, new WeakRef(result))\n                }\n            }\n        }\n        return result\n    }\n\n    at = 0\n    ch = \" \"\n    result = value()\n    whitespace()\n    if (ch) {\n        error(\"Syntax error\")\n    }\n\n    if (typeof reviver === 'function') {\n        function walk(holder, key)\n        {\n          var k;\n          var v;\n          var value = holder[key];\n          if (value !== null \n                  && typeof value === \"object\" \n                  && !(value instanceof String \n                  || value instanceof Number\n                  || value instanceof Boolean)\n          ) {\n              for (k in value) {\n                  if (Object.prototype.hasOwnProperty.call(value, k)) {\n                      v = walk(value, k);\n                      if (v !== undefined \n                            && ( typeof value[k] === 'undefined' || value[k]!==v) )\n                      {\n                          value[k] = v;\n                          if (JSONTag.getType(v)==='link') {\n                                checkUnresolved(v, value, k)\n                          }\n                      } else if (v === undefined) {\n                          delete value[k];\n                      }\n                  }\n              }\n          }\n          return reviver.call(holder, key, value, meta);\n        }\n        \n        walk({\"\":result}, \"\")\n    }\n\n    let replaceLink = function(u,value)\n    {\n        if (typeof value !== 'undefined') {\n            let src = u.src.deref()\n            if (typeof src!== 'undefined' && JSONTag.getType(src[u.key])==='link') {\n                src[u.key] = value\n                return true\n            }\n        }\n    }\n\n    if (meta.index.id.size>meta.unresolved.size) {\n        meta.unresolved.forEach((links,id) => {\n            let value = meta.index.id.get(id)?.deref()\n            if (value!==undefined) {\n                links.forEach((u,i) => {\n                    if (replaceLink(u,value)) {\n                        delete links[i]\n                    }\n                })\n            }\n        })\n    } else {\n        meta.index.id.forEach((ref,id) => {\n            let value = ref.deref()\n            let links = meta.unresolved.get(id)\n            if (value!==undefined && typeof links !== 'undefined') {\n                links.forEach((u,i) => {\n                    replaceLink(u,value)\n                })\n                meta.unresolved.delete(id)\n            }\n        })\n    }\n    \n    return result\n}", "import Null from './lib/Null.mjs'\nimport Link from './lib/Link.mjs'\nimport * as attr from './lib/functions.mjs'\nimport parse from './lib/fast-parse.mjs'\n\nwindow.JSONTag = {\n\tstringify: attr.stringify,\n\tparse,\n\n\tgetType: attr.getType,\n\tsetType: attr.setType,\n\tgetTypeString: attr.getTypeString,\n\n\tsetAttribute: attr.setAttribute,\n\tgetAttribute: attr.getAttribute,\n\taddAttribute: attr.addAttribute,\n\tremoveAttribute: attr.removeAttribute,\n\tgetAttributes: attr.getAttributes,\n\tsetAttributes: attr.setAttributes,\n\tgetAttributesString: attr.getAttributesString,\n\n\tisNull: attr.isNull,\n\tclone: attr.clone,\n\n\tLink,\n\tNull\n}"],
  "mappings": "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",
  "names": ["result", "value", "clone", "result", "value", "object", "array"]
}
